Aplicación API RESTful de creación de usuarios  

Tecnología utilizada  
JDK: Azul Zulu version 1.8.0_362  
Gradle 8.0  
Gradle DSL: Kotlin  
IDE: IntelliJ IDEA 2023.1.3 (Community Edition)  
  
  
App Visual para interacción con la base de datos (creación de la instancia y de las tablas):  
razorsql10.5.1 (64 bits), descargada de https://razorsql.com/download.html  
 	 
DDL tabla usuarios:  
CREATE TABLE PUBLIC.USERS (  
id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,  
name VARCHAR(30),  
email  VARCHAR(50),  
password VARCHAR(50),  
createddate DATE,  
modifieddate DATE,  
lastlogon DATE,  
token VARCHAR(100),  
isactive BOOLEAN  
);  
  
DDL tabla teléfonos:  
CREATE TABLE PUBLIC.PHONES (  
id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,  
number VARCHAR(12),  
citycode  VARCHAR(6),  
countrycode VARCHAR(4),  
userId INTEGER,  
FOREIGN KEY(userId) REFERENCES PUBLIC.USERS(id)  
);  
  
Cadena de conexión a la base de datos y credenciales: dentro del fichero yamel de la aplicación  
  
Mensajes Rest para alcanzar los endpoints expuestos:  
1. Creación de usuarios  
* http://localhost:6060/createUser (petción POST)  
* Content-Type: applicaton/json  
* Body (raw, en JSON):  
{  
"name": "Nombre Apellido",  
"email": "nombre@apellido.cl",  
"password": "Zxlggwy23",  
"phones": [  
{  
"number": "1234567823",  
"citycode": "1223",  
"contrycode": "5783"  
}  
]  
}  
  
2. Listado de usuarios  
* http://localhost:6060/users (petición GET)  
  
-----------------------------------  
  
Solución:  
Dentro del paquete tomcat de la app de Java:  
- AppLauncher:  Clase que lanza la aplicación e inicializa el servidor embebido de Tomcat  
- EmbeddedTomcat: Clase para crear, arrancar y parar el servidor de aplicaciones Tomcat  
- ServerConfig: Clase para establecer el fichero server.porperties de la app como fichero de propiedades de Tomcat  
- WebInit: Casle para inicializar la aplicación web y habilitar la configuración MVC de Spring  
  
Paquete model:  
Clases entity (User, Phone) que representan las tablas de usuarios y teléfonos (basándose en el fichero persistence.xml) para la persistencia (con Hibernate)  
  
Paquete repository:  
Interfaz (UserDao) con la clase que la implementa (UserDaoImpl) que implementa los métodos para interactuar con la entidad User.  
  
Paquete dto:  
Clase UserDto para poder recibir el mensaje JSON de la creación de usuarios sin preocuparnos de su transformación  
      También implementa el método correspondiente de transformar la clase entity User a la clase UserDto, para poder reutilizar esta transformación en diferentes puntos  
Clase UserDInfoto para poder devolver el mensaje JSON del listado de usuarios  
  
Paquete service:  
Clase UserService, que tiene la lógica para comunicarse con el repositorio y el controlador, haciendo uso del EntityManager (utilizando los ficheros de configuración spring.xml y persistence.xml)  
  
Paquete controller:  
Clase UserController, que expone los endpoints de creación de usuarios y listado de todos los usuarios.  
      Como Aplicación API RESTful, debería haber expuesto al menos también el método PUT para la creación/modificación de usuarios y el método DELETE para el borrado de usuarios  
Clase ResponseHandler, para manejar las respuesta HTTP  
  
Como debe de la aplicación, aparte del par de métodos PUT y DELETE,  ha quedado la implementación del token del usuario (a través de JSON Web Token)  


